import{A as m,Z as g,d as v,B as D,K as C,r as a,o as V,e as N,f as t,w as i,g as u,_,h as f}from"./index-c43d1155.js";import{_ as T}from"./index.vue_vue_type_script_setup_true_name_ProTable_lang-c524650c.js";import{u as b}from"./useHandleData-701da553.js";import"./_plugin-vue_export-helper-c27b6911.js";const x=l=>m.post(`${g}/list`,{...l,video_id:Number(l.video_id)}),h=l=>m.post(`${g}/revalidate`,l),B={class:"table-box"},I=v({name:"useProTable"}),P=v({...I,setup(l){const d=D(),o=C({page:1,pageSize:10}),s=["未检测","正常","无法访问","超时"],w=[{width:60,type:"selection",align:"center"},{width:100,prop:"parent_name",label:"站点",search:{render(){return t(a("el-select"),{modelValue:o.parent_name,"onUpdate:modelValue":e=>o.parent_name=e,placeholder:"请选择发布站点",clearable:!0},{default:()=>[t(a("el-option"),{value:"集团",label:"集团"},null),t(a("el-option"),{value:"桃红",label:"桃红"},null)]})}}},{width:100,prop:"site_name",label:"发布站点"},{width:100,prop:"video_id",label:"视频ID",search:{el:"input",key:"video_id"}},{width:180,prop:"video_title",label:"视频标题"},{width:160,prop:"direct_status",label:"直连状态",render({row:e}){return t(a("el-tag"),{type:e.direct_status===0?"info":e.direct_status===1?"success":"warning"},{default:()=>[s[e.direct_status]]})}},{width:160,prop:"cf_status",label:"阿里云状态",render({row:e}){return t(a("el-tag"),{type:e.cf_status===0?"info":e.cf_status===1?"success":"warning"},{default:()=>[s[e.cf_status]]})}},{width:160,prop:"cdn_status",label:"NBCDN状态",render({row:e}){return t(a("el-tag"),{type:e.cdn_status===0?"info":e.cdn_status===1?"success":"warning"},{default:()=>[s[e.cdn_status]]})}},{width:160,prop:"hc_status",label:"华为云状态",render({row:e}){return t(a("el-tag"),{type:e.hc_status===0?"info":e.hc_status===1?"success":"warning"},{default:()=>[s[e.hc_status]]})}},{width:160,prop:"nbcdncf_status",label:"NBCDNCF状态",render({row:e}){return t(a("el-tag"),{type:e.nbcdncf_status===0?"info":e.nbcdncf_status===1?"success":"warning"},{default:()=>[s[e.nbcdncf_status]]})}},{width:160,prop:"cover_status",label:"封面状态",render({row:e}){return t(a("el-tag"),{type:e.cover_status===0?"info":e.cover_status===1?"success":"warning"},{default:()=>[s[e.cover_status]]})}},{width:160,prop:"down_status",label:"下载状态",render({row:e}){return t(a("el-tag"),{type:e.down_status===0?"info":e.down_status===1?"success":"warning"},{default:()=>[s[e.down_status]]})}},{width:180,prop:"UpdatedAt",label:"更新时间",render(e){return new Date(e.row.UpdatedAt).toLocaleString()}},{width:180,prop:"created_at",label:"创建时间",render(e){return new Date(e.row.created_at).toLocaleString()}},{prop:"operation",label:"操作",fixed:"right",width:140}],y=async e=>{const n=[];n.push(e.ID),await b(h,{IDs:n},`检测【${e.video_title}】`),d.value.getTableList()},k=async e=>{const n=[];e.forEach(r=>{n.push(r.ID)}),await b(h,{IDs:n},"检测选中视频"),d.value.getTableList()};return(e,n)=>{const r=a("el-button");return V(),N("div",B,[t(T,{ref_key:"proTable",ref:d,title:"站点配置列表",indent:30,columns:w,"init-param":o,"request-api":u(x)},{tableHeader:i(({selectedList:c,isSelected:p})=>[t(r,{type:"primary",disabled:!p,icon:u(_),onClick:$=>k(c)},{default:i(()=>[f(" 批量检测 ")]),_:2},1032,["disabled","icon","onClick"])]),operation:i(({row:c})=>[t(r,{type:"primary",link:"",icon:u(_),onClick:p=>y(c)},{default:i(()=>[f(" 检测 ")]),_:2},1032,["icon","onClick"])]),_:1},8,["init-param","request-api"])])}}});export{P as default};
