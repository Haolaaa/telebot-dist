import{af as s,am as p,d as b,i as c,r as h,o as y,c as v,b as i,w as n,u as f,W as k,e as _,X as D,Y as $}from"./index-ac83fa3e.js";import{_ as T}from"./index.vue_vue_type_script_setup_true_name_ProTable_lang-5829a404.js";import{_ as N}from"./SiteConfigDrawer.vue_vue_type_script_setup_true_name_UserDrawer_lang-8d178835.js";import{u as A}from"./useHandleData-203e43f5.js";import"./_plugin-vue_export-helper-c27b6911.js";const x=t=>s.post(`${p}/siteConfigList`,t),P=t=>s.post(`${p}/addSiteConfig`,t),L=t=>s.post(`${p}/deleteSiteConfig`,t),I=t=>s.post(`${p}/setSiteConfig`,t),U={class:"table-box"},E=b({name:"useProTable"}),H=b({...E,setup(t){const d=c(),u=c([]),w=async()=>{const e=await x({page:1,pageSize:100});u.value=e.data.list},g=[{width:100,prop:"parentName",label:"站点"},{width:100,prop:"siteName",label:"站点名称"},{width:100,prop:"siteKey",label:"站点KEY"},{width:100,prop:"siteId",label:"站点标识"},{width:180,prop:"directPlayUrl",label:"直连播放地址"},{width:180,prop:"cfPlayUrl",label:"CF播放地址"},{width:180,prop:"cdnPlayUrl",label:"CDN播放地址"},{width:180,prop:"videoCover",label:"视频封面"},{width:180,prop:"downloadUrl",label:"下载地址"},{width:180,prop:"CreatedAt",label:"创建时间",render(e){return new Date(e.row.CreatedAt).toLocaleString()}},{prop:"operation",label:"操作",fixed:"right",width:180}],C=c(null),m=(e,l={})=>{var a,r;const o={title:e,isView:e==="查看",row:{...l},api:e==="新增"?P:e==="编辑"?I:void 0,getTableList:(a=d.value)==null?void 0:a.getTableList};(r=C.value)==null||r.acceptParams(o)},S=async e=>{await A(L,{id:e.ID},`删除【${e.siteName}】`),d.value.getTableList()};return(e,l)=>{const o=h("el-button");return y(),v("div",U,[i(T,{ref_key:"proTable",ref:d,title:"站点配置列表",indent:30,columns:g,data:u.value,"request-api":w},{tableHeader:n(()=>[i(o,{type:"primary",icon:f(k),onClick:l[0]||(l[0]=a=>m("新增"))},{default:n(()=>[_("新增站点 ")]),_:1},8,["icon"])]),operation:n(({row:a})=>[i(o,{type:"primary",link:"",icon:f(D),onClick:r=>m("编辑",a)},{default:n(()=>[_(" 编辑 ")]),_:2},1032,["icon","onClick"]),i(o,{type:"primary",link:"",icon:f($),onClick:r=>S(a)},{default:n(()=>[_(" 删除 ")]),_:2},1032,["icon","onClick"])]),_:1},8,["data"]),i(N,{ref_key:"SiteConfigDrawerRef",ref:C},null,512)])}}});export{H as default};
