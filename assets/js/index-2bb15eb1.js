import{af as s,am as d,d as C,i as m,r as h,o as g,c as y,b as i,w as l,u as p,W as S,e as f,X as k,Y as v}from"./index-4d49774a.js";import{_ as $}from"./index.vue_vue_type_script_setup_true_name_ProTable_lang-f0dfa2f1.js";import{_ as T}from"./SiteConfigDrawer.vue_vue_type_script_setup_true_name_UserDrawer_lang-28da8fa4.js";import{u as D}from"./useHandleData-ce997433.js";import"./_plugin-vue_export-helper-c27b6911.js";const N=t=>s.post(`${d}/siteConfigList`,t),A=t=>s.post(`${d}/addSiteConfig`,t),P=t=>s.post(`${d}/deleteSiteConfig`,t),x=t=>s.post(`${d}/setSiteConfig`,t),L={class:"table-box"},U=C({name:"useProTable"}),B=C({...U,setup(t){const c=m(),b=[{width:100,prop:"parentName",label:"站点"},{width:100,prop:"siteName",label:"站点名称"},{width:100,prop:"siteKey",label:"站点KEY"},{width:100,prop:"siteId",label:"站点标识"},{width:180,prop:"directPlayUrl",label:"直连播放域名"},{width:180,prop:"cfPlayUrl",label:"CF播放域名"},{width:180,prop:"cdnPlayUrl",label:"CDN播放域名"},{width:180,prop:"hcPlayUrl",label:"华为云播放域名"},{width:180,prop:"videoCover",label:"视频封面"},{width:180,prop:"downloadUrl",label:"下载域名"},{width:180,prop:"CreatedAt",label:"创建时间",render(e){return new Date(e.row.CreatedAt).toLocaleString()}},{prop:"operation",label:"操作",fixed:"right",width:180}],_=m(null),u=(e,n={})=>{var o,r;const a={title:e,isView:e==="查看",row:{...n},api:e==="新增"?A:e==="编辑"?x:void 0,getTableList:(o=c.value)==null?void 0:o.getTableList};(r=_.value)==null||r.acceptParams(a)},w=async e=>{await D(P,{id:e.ID},`删除【${e.siteName}】`),c.value.getTableList()};return(e,n)=>{const a=h("el-button");return g(),y("div",L,[i($,{ref_key:"proTable",ref:c,title:"站点配置列表",indent:30,columns:b,"request-api":p(N)},{tableHeader:l(()=>[i(a,{type:"primary",icon:p(S),onClick:n[0]||(n[0]=o=>u("新增"))},{default:l(()=>[f("新增站点配置")]),_:1},8,["icon"])]),operation:l(({row:o})=>[i(a,{type:"primary",link:"",icon:p(k),onClick:r=>u("编辑",o)},{default:l(()=>[f(" 编辑 ")]),_:2},1032,["icon","onClick"]),i(a,{type:"primary",link:"",icon:p(v),onClick:r=>w(o)},{default:l(()=>[f(" 删除 ")]),_:2},1032,["icon","onClick"])]),_:1},8,["request-api"]),i(T,{ref_key:"SiteConfigDrawerRef",ref:_},null,512)])}}});export{B as default};
