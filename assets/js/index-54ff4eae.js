import{A as b,Z as w,d as m,B as k,r as a,o as C,e as D,f as e,w as o,g as c,_ as p,h as _}from"./index-7dc4f2d9.js";import{_ as A}from"./index.vue_vue_type_script_setup_true_name_ProTable_lang-36752a68.js";import{u as f}from"./useHandleData-9f2382d5.js";import"./_plugin-vue_export-helper-c27b6911.js";const T=r=>b.post(`${w}/list`,r),h=r=>b.post(`${w}/revalidate`,r),V={class:"table-box"},x=m({name:"useProTable"}),N=m({...x,setup(r){const l=k(),s=["未检测","正常","无法访问","超时"],g=[{width:60,type:"selection",align:"center"},{width:100,prop:"parent_name",label:"站点"},{width:100,prop:"site_name",label:"发布站点"},{width:100,prop:"video_id",label:"视频ID"},{width:180,prop:"video_title",label:"视频标题"},{width:160,prop:"direct_status",label:"直连状态",render({row:t}){return e(a("el-tag"),{type:t.direct_status===0?"info":t.direct_status===1?"success":"warning"},{default:()=>[s[t.direct_status]]})}},{width:160,prop:"cf_status",label:"阿里云状态",render({row:t}){return e(a("el-tag"),{type:t.cf_status===0?"info":t.cf_status===1?"success":"warning"},{default:()=>[s[t.cf_status]]})}},{width:160,prop:"aws_status",label:"亚马逊状态",render({row:t}){return e(a("el-tag"),{type:t.aws_status===0?"info":t.aws_status===1?"success":"warning"},{default:()=>[s[t.aws_status]]})}},{width:160,prop:"hc_status",label:"华为云状态",render({row:t}){return e(a("el-tag"),{type:t.hc_status===0?"info":t.hc_status===1?"success":"warning"},{default:()=>[s[t.hc_status]]})}},{width:160,prop:"cover_status",label:"封面状态",render({row:t}){return e(a("el-tag"),{type:t.cover_status===0?"info":t.cover_status===1?"success":"warning"},{default:()=>[s[t.cover_status]]})}},{width:160,prop:"down_status",label:"下载状态",render({row:t}){return e(a("el-tag"),{type:t.down_status===0?"info":t.down_status===1?"success":"warning"},{default:()=>[s[t.down_status]]})}},{width:180,prop:"UpdatedAt",label:"更新时间",render(t){return new Date(t.row.UpdatedAt).toLocaleString()}},{width:180,prop:"CreatedAt",label:"创建时间",render(t){return new Date(t.row.CreatedAt).toLocaleString()}},{prop:"operation",label:"操作",fixed:"right",width:140}],v=async t=>{const n=[];n.push(t.ID),await f(h,{IDs:n},`检测【${t.video_title}】`),l.value.getTableList()},y=async t=>{const n=[];t.forEach(i=>{n.push(i.ID)}),await f(h,{IDs:n},"检测选中视频"),l.value.getTableList()};return(t,n)=>{const i=a("el-button");return C(),D("div",V,[e(A,{ref_key:"proTable",ref:l,title:"站点配置列表",indent:30,columns:g,"request-api":c(T)},{tableHeader:o(({selectedList:d,isSelected:u})=>[e(i,{type:"primary",disabled:!u,icon:c(p),onClick:I=>y(d)},{default:o(()=>[_(" 批量检测 ")]),_:2},1032,["disabled","icon","onClick"])]),operation:o(({row:d})=>[e(i,{type:"primary",link:"",icon:c(p),onClick:u=>v(d)},{default:o(()=>[_(" 检测 ")]),_:2},1032,["icon","onClick"])]),_:1},8,["request-api"])])}}});export{N as default};
