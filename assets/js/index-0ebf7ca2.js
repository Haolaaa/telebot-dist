import{af as p,am as d,d as C,i as m,r as g,o as h,c as y,b as i,w as n,u as s,W as S,e as f,X as k,Y as v}from"./index-f1e2d506.js";import{_ as $}from"./index.vue_vue_type_script_setup_true_name_ProTable_lang-6ba1b3fe.js";import{_ as T}from"./SiteConfigDrawer.vue_vue_type_script_setup_true_name_UserDrawer_lang-4ec9c15c.js";import{u as D}from"./useHandleData-dd6876fc.js";import"./_plugin-vue_export-helper-c27b6911.js";const N=t=>p.post(`${d}/siteConfigList`,t),A=t=>p.post(`${d}/addSiteConfig`,t),x=t=>p.post(`${d}/deleteSiteConfig`,t),P=t=>p.post(`${d}/setSiteConfig`,t),L={class:"table-box"},I=C({name:"useProTable"}),B=C({...I,setup(t){const c=m(),b=[{width:100,prop:"parentName",label:"站点"},{width:100,prop:"siteName",label:"站点名称"},{width:100,prop:"siteKey",label:"站点KEY"},{width:100,prop:"siteId",label:"站点标识"},{width:180,prop:"directPlayUrl",label:"直连播放域名"},{width:180,prop:"cfPlayUrl",label:"CF播放域名"},{width:180,prop:"cdnPlayUrl",label:"CDN播放域名"},{width:180,prop:"videoCover",label:"视频封面"},{width:180,prop:"downloadUrl",label:"下载域名"},{width:180,prop:"CreatedAt",label:"创建时间",render(e){return new Date(e.row.CreatedAt).toLocaleString()}},{prop:"operation",label:"操作",fixed:"right",width:180}],_=m(null),u=(e,r={})=>{var o,l;const a={title:e,isView:e==="查看",row:{...r},api:e==="新增"?A:e==="编辑"?P:void 0,getTableList:(o=c.value)==null?void 0:o.getTableList};(l=_.value)==null||l.acceptParams(a)},w=async e=>{await D(x,{id:e.ID},`删除【${e.siteName}】`),c.value.getTableList()};return(e,r)=>{const a=g("el-button");return h(),y("div",L,[i($,{ref_key:"proTable",ref:c,title:"站点配置列表",indent:30,columns:b,"request-api":s(N)},{tableHeader:n(()=>[i(a,{type:"primary",icon:s(S),onClick:r[0]||(r[0]=o=>u("新增"))},{default:n(()=>[f("新增站点配置")]),_:1},8,["icon"])]),operation:n(({row:o})=>[i(a,{type:"primary",link:"",icon:s(k),onClick:l=>u("编辑",o)},{default:n(()=>[f(" 编辑 ")]),_:2},1032,["icon","onClick"]),i(a,{type:"primary",link:"",icon:s(v),onClick:l=>w(o)},{default:n(()=>[f(" 删除 ")]),_:2},1032,["icon","onClick"])]),_:1},8,["request-api"]),i(T,{ref_key:"SiteConfigDrawerRef",ref:_},null,512)])}}});export{B as default};
