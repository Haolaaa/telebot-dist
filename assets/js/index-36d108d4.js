import{A as l,W as p,d as y,B as _,r as f,o as C,e as k,f as n,w as u,g as i,E as A,F as x,h as m,G as D,m as T}from"./index-9b3ddb4e.js";import{_ as $}from"./index.vue_vue_type_script_setup_true_name_ProTable_lang-11875179.js";import{u as c}from"./useHandleData-e7751c4f.js";import"./_plugin-vue_export-helper-c27b6911.js";const B=e=>l.post(`${p}/list`,e),S=e=>l.post(`${p}/delete`,e),I=e=>l.post(`${p}/updateStatus`,e),L=e=>l.post(`${p}/addPerson`,e),N={class:"table-box"},P=y({name:"useProTable"}),U=y({...P,setup(e){const o=_(),s=_(""),b=[{prop:"chat_id",label:"飞机 Chat ID"},{width:100,prop:"status",label:"状态",render({row:t}){return n(f("el-tag"),{type:t.status===1?"success":"danger"},{default:()=>[t.status===1?"启用":"禁用"]})}},{prop:"person_to_notify",label:"提醒人员",render({row:t}){return n("input",{type:"text",style:{width:"90%",height:"30px",textAlign:"center",border:"none",background:"transparent"},value:t.person_to_notify,onInput:r=>{s.value=r.target.value},onFocus:()=>{s.value=t.person_to_notify},onBlur:async()=>{s.value!==t.person_to_notify&&(await c(L,{id:t.ID,person_to_notify:s.value},"更新提醒人员"),o.value.getTableList())}},null)}},{prop:"UpdatedAt",label:"更新时间",render(t){return new Date(t.row.UpdatedAt).toLocaleString()}},{prop:"CreatedAt",label:"创建时间",render(t){return new Date(t.row.CreatedAt).toLocaleString()}},{prop:"operation",label:"操作",fixed:"right",width:180}],g=async(t={})=>{const r=t.status===1?0:1;await c(I,{id:t.ID,status:r},`更新【${t.chat_id}】状态`),o.value.getTableList()},h=async t=>{await c(S,{id:t.ID},`删除【${t.chat_id}】`),o.value.getTableList()};return(t,r)=>{const d=f("el-button");return C(),k("div",N,[n($,{ref_key:"proTable",ref:o,title:"站点配置列表",indent:30,columns:b,"request-api":i(B)},{operation:u(({row:a})=>[n(d,{type:a.status===1?"danger":"primary",link:"",icon:a.status===1?i(A):i(x),onClick:v=>g(a)},{default:u(()=>[m(D(a.status===1?"禁用":"启用"),1)]),_:2},1032,["type","icon","onClick"]),n(d,{type:"primary",link:"",icon:i(T),onClick:v=>h(a)},{default:u(()=>[m(" 删除 ")]),_:2},1032,["icon","onClick"])]),_:1},8,["request-api"])])}}});export{U as default};
