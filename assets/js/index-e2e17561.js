import{d as m,i as s,r as w,o as D,c as k,b as o,w as n,u,W as v,e as p,aM as g,X as C,Y as S}from"./index-4d49774a.js";import{_ as T}from"./index.vue_vue_type_script_setup_true_name_ProTable_lang-f0dfa2f1.js";import{_ as $}from"./AuthDrawer.vue_vue_type_script_setup_true_name_UserDrawer_lang-9ea0a3ca.js";import{_ as I}from"./SetAuth.vue_vue_type_script_setup_true_name_Drawer_lang-a603430c.js";import{G as L,A as x,S as R,D as N}from"./auth-e47e6c1a.js";import{u as V}from"./useHandleData-ce997433.js";import"./_plugin-vue_export-helper-c27b6911.js";const B={class:"table-box"},G=m({name:"menuMange"}),X=m({...G,setup(H){const l=s(),c=s(),h=async()=>{const e=await L({page:1,pageSize:10});c.value=e.data.list},y=[{prop:"authorityName",label:"角色名"},{prop:"authorityID",label:"角色ID"},{prop:"UpdatedAt",label:"更新时间",render(e){return new Date(e.row.UpdatedAt).toLocaleString()}},{prop:"CreatedAt",label:"创建时间",render(e){return new Date(e.row.CreatedAt).toLocaleString()}},{prop:"operation",label:"操作",width:250,fixed:"right"}],d=s(null),f=(e,t={})=>{var r,i;const a={title:e,isView:e==="查看",row:{...t},api:e==="新增"?x:e==="编辑"?R:void 0,getTableList:(r=l.value)==null?void 0:r.getTableList};(i=d.value)==null||i.acceptParams(a)},_=s(null),A=e=>{var t,a;(a=_.value)==null||a.acceptParams({authorityID:e.authorityID,getTableList:(t=l.value)==null?void 0:t.getTableList})},b=async e=>{await V(N,{authorityID:e.authorityID},`删除【${e.authorityID}】`),l.value.getTableList()};return(e,t)=>{const a=w("el-button");return D(),k("div",B,[o(T,{ref_key:"proTable",ref:l,title:"角色列表","row-key":"path",indent:30,columns:y,data:c.value,pagination:!1,"request-api":h},{tableHeader:n(()=>[o(a,{type:"primary",icon:u(v),onClick:t[0]||(t[0]=r=>f("新增"))},{default:n(()=>[p("新增角色 ")]),_:1},8,["icon"])]),operation:n(r=>[o(a,{type:"primary",link:"",icon:u(g),onClick:i=>A(r.row)},{default:n(()=>[p("设置权限")]),_:2},1032,["icon","onClick"]),o(a,{type:"primary",link:"",icon:u(C),onClick:t[1]||(t[1]=i=>f("编辑"))},{default:n(()=>[p("编辑")]),_:1},8,["icon"]),o(a,{type:"primary",link:"",icon:u(S),onClick:i=>b(r.row)},{default:n(()=>[p("删除")]),_:2},1032,["icon","onClick"])]),_:1},8,["data"]),o($,{ref_key:"AuthDrawerRef",ref:d},null,512),o(I,{ref_key:"SetAuthRef",ref:_},null,512)])}}});export{X as default};
