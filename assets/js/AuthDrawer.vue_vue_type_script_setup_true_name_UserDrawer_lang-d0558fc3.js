import{d as v,K as D,B as n,r as s,o as g,i as x,w as r,f as a,h as f,q as I,Y as N,O as k}from"./index-5e2a43dd.js";const q=v({name:"UserDrawer"}),$=v({...q,setup(C,{expose:w}){const _=D({authorityID:[{required:!0,trigger:"blur",validator:c}],authorityName:[{required:!0,message:"请输入角色名称",trigger:"blur"}]});function c(i,t,l){if(!t)return l(new Error("请输入角色标识"));if(!/^[0-9]{3,16}$/.test(t))return l(new Error("角色标识必须是3-16位数字"));l()}const u=n(!1),e=n({isView:!1,title:"",row:{}}),y=i=>{e.value=i,u.value=!0},d=n(),V=()=>{d.value.validate(async i=>{if(i)try{e.value.row.parentID=0,e.value.row.authorityID=Number(e.value.row.authorityID),await e.value.api(e.value.row),k.success({message:`${e.value.title}用户成功！`}),e.value.getTableList(),u.value=!1}catch{}})};return w({acceptParams:y}),(i,t)=>{const l=s("el-input"),m=s("el-form-item"),h=s("el-form"),p=s("el-button"),b=s("el-drawer");return g(),x(b,{modelValue:u.value,"onUpdate:modelValue":t[3]||(t[3]=o=>u.value=o),"destroy-on-close":!0,size:"450px",title:`${e.value.title}用户`},{footer:r(()=>[a(p,{onClick:t[2]||(t[2]=o=>u.value=!1)},{default:r(()=>[f(" 取消 ")]),_:1}),I(a(p,{type:"primary",onClick:V},{default:r(()=>[f(" 确定 ")]),_:1},512),[[N,!e.value.isView]])]),default:r(()=>[a(h,{ref_key:"ruleFormRef",ref:d,"label-width":"100px","label-suffix":" :",rules:_,disabled:e.value.isView,model:e.value.row,"hide-required-asterisk":e.value.isView},{default:r(()=>[a(m,{label:"角色标识",prop:"authorityID"},{default:r(()=>[a(l,{modelValue:e.value.row.authorityID,"onUpdate:modelValue":t[0]||(t[0]=o=>e.value.row.authorityID=o),placeholder:"请填写角色标识",clearable:""},null,8,["modelValue"])]),_:1}),a(m,{label:"角色名称",prop:"authorityName"},{default:r(()=>[a(l,{modelValue:e.value.row.authorityName,"onUpdate:modelValue":t[1]||(t[1]=o=>e.value.row.authorityName=o),placeholder:"请填写角色名称",clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","disabled","model","hide-required-asterisk"])]),_:1},8,["modelValue","title"])}}});export{$ as _};
