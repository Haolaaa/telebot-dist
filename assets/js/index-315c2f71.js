import{d as b,B as s,r as m,o as f,e as w,f as l,w as n,g as p,j as M,h as c,i as A,a8 as T,a9 as C,l as x,m as D,aa as L,ab as _,ac as B}from"./index-39a7af8f.js";import{_ as I}from"./AddMenu.vue_vue_type_script_setup_true_name_UserDrawer_lang-136720b5.js";import{_ as N}from"./index.vue_vue_type_script_setup_true_name_ProTable_lang-111d4dbc.js";import"./_plugin-vue_export-helper-c27b6911.js";const S={class:"table-box"},V=b({name:"menuMange"}),E=b({...V,setup($){const r=s(),v=s({page:1,pageSize:10}),u=s(),g=async()=>{const e=await L({page:1,pageSize:10});u.value=e.data.list},k=[{type:"index",label:"#",width:150},{prop:"meta.title",label:"菜单名称",width:150},{prop:"meta.icon",label:"菜单图标",width:80},{prop:"name",label:"菜单标识",width:150},{prop:"path",label:"菜单路径",width:300},{prop:"component",label:"组件路径",width:300},{prop:"operation",label:"操作",width:250,fixed:"right"}],d=s(null),y=(e,a={})=>{var o,i;a=e==="新增"?{...a,parentID:"0",meta:{icon:"",title:"",activeName:"",closeTab:!1,keepAlive:!1,defaultMenu:!1}}:a;const t={title:e,isView:e==="查看",row:{...a},api:e==="新增"?_:e==="编辑"?B:void 0,getTableList:(o=r.value)==null?void 0:o.getTableList};(i=d.value)==null||i.acceptParams(t)},h=e=>{var t,o;e.ID;const a={title:"新增子菜单",isView:!1,row:{parentID:String(e.ID),meta:{icon:"",title:"",activeName:"",closeTab:!1,keepAlive:!1,defaultMenu:!1}},api:_,getTableList:(t=r.value)==null?void 0:t.getTableList};(o=d.value)==null||o.acceptParams(a)};return(e,a)=>{const t=m("el-button"),o=m("el-icon");return f(),w("div",S,[l(N,{ref_key:"proTable",ref:r,title:"菜单列表","row-key":"path",indent:30,data:u.value,columns:k,pagination:!1,"request-api":g,"init-param":v.value},{tableHeader:n(()=>[l(t,{type:"primary",icon:p(M),onClick:a[0]||(a[0]=i=>y("新增"))},{default:n(()=>[c("新增菜单")]),_:1},8,["icon"])]),icon:n(i=>[l(o,{size:18},{default:n(()=>[(f(),A(T(i.row.meta.icon)))]),_:2},1024)]),operation:n(i=>[l(t,{type:"primary",link:"",icon:p(C),onClick:z=>h(i.row)},{default:n(()=>[c("子菜单")]),_:2},1032,["icon","onClick"]),l(t,{type:"primary",link:"",icon:p(x)},{default:n(()=>[c("编辑")]),_:1},8,["icon"]),l(t,{type:"primary",link:"",icon:p(D)},{default:n(()=>[c("删除")]),_:1},8,["icon"])]),_:1},8,["data","init-param"]),l(I,{ref_key:"AddMenuRef",ref:d},null,512)])}}});export{E as default};
