import{A as m,Z as w,d as g,B as C,K as D,r as a,o as V,e as A,f as t,w as r,g as u,_,h as f}from"./index-9b3ddb4e.js";import{_ as T}from"./index.vue_vue_type_script_setup_true_name_ProTable_lang-11875179.js";import{u as h}from"./useHandleData-e7751c4f.js";import"./_plugin-vue_export-helper-c27b6911.js";const x=l=>m.post(`${w}/list`,{...l,video_id:Number(l.video_id)}),b=l=>m.post(`${w}/revalidate`,l),I={class:"table-box"},$=g({name:"useProTable"}),P=g({...$,setup(l){const o=C(),d=D({page:1,pageSize:10}),s=["未检测","正常","无法访问","超时"],v=[{width:60,type:"selection",align:"center"},{width:100,prop:"parent_name",label:"站点",search:{render(){return t(a("el-select"),{modelValue:d.parent_name,"onUpdate:modelValue":e=>d.parent_name=e,placeholder:"请选择发布站点",clearable:!0},{default:()=>[t(a("el-option"),{value:"集团",label:"集团"},null),t(a("el-option"),{value:"桃红",label:"桃红"},null)]})}}},{width:100,prop:"site_name",label:"发布站点"},{width:100,prop:"video_id",label:"视频ID",search:{el:"input",key:"video_id"}},{width:180,prop:"video_title",label:"视频标题"},{width:160,prop:"direct_status",label:"直连状态",render({row:e}){return t(a("el-tag"),{type:e.direct_status===0?"info":e.direct_status===1?"success":"warning"},{default:()=>[s[e.direct_status]]})}},{width:160,prop:"cf_status",label:"阿里云状态",render({row:e}){return t(a("el-tag"),{type:e.cf_status===0?"info":e.cf_status===1?"success":"warning"},{default:()=>[s[e.cf_status]]})}},{width:160,prop:"aws_status",label:"亚马逊状态",render({row:e}){return t(a("el-tag"),{type:e.aws_status===0?"info":e.aws_status===1?"success":"warning"},{default:()=>[s[e.aws_status]]})}},{width:160,prop:"hc_status",label:"华为云状态",render({row:e}){return t(a("el-tag"),{type:e.hc_status===0?"info":e.hc_status===1?"success":"warning"},{default:()=>[s[e.hc_status]]})}},{width:160,prop:"cover_status",label:"封面状态",render({row:e}){return t(a("el-tag"),{type:e.cover_status===0?"info":e.cover_status===1?"success":"warning"},{default:()=>[s[e.cover_status]]})}},{width:160,prop:"down_status",label:"下载状态",render({row:e}){return t(a("el-tag"),{type:e.down_status===0?"info":e.down_status===1?"success":"warning"},{default:()=>[s[e.down_status]]})}},{width:180,prop:"UpdatedAt",label:"更新时间",render(e){return new Date(e.row.UpdatedAt).toLocaleString()}},{width:180,prop:"CreatedAt",label:"创建时间",render(e){return new Date(e.row.CreatedAt).toLocaleString()}},{prop:"operation",label:"操作",fixed:"right",width:140}],y=async e=>{const n=[];n.push(e.ID),await h(b,{IDs:n},`检测【${e.video_title}】`),o.value.getTableList()},k=async e=>{const n=[];e.forEach(i=>{n.push(i.ID)}),await h(b,{IDs:n},"检测选中视频"),o.value.getTableList()};return(e,n)=>{const i=a("el-button");return V(),A("div",I,[t(T,{ref_key:"proTable",ref:o,title:"站点配置列表",indent:30,columns:v,"init-param":d,"request-api":u(x)},{tableHeader:r(({selectedList:c,isSelected:p})=>[t(i,{type:"primary",disabled:!p,icon:u(_),onClick:L=>k(c)},{default:r(()=>[f(" 批量检测 ")]),_:2},1032,["disabled","icon","onClick"])]),operation:r(({row:c})=>[t(i,{type:"primary",link:"",icon:u(_),onClick:p=>y(c)},{default:r(()=>[f(" 检测 ")]),_:2},1032,["icon","onClick"])]),_:1},8,["init-param","request-api"])])}}});export{P as default};
