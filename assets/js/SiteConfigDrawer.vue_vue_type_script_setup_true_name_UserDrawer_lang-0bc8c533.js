import{d as V,aa as N,i as m,r as d,o as C,h as x,w as r,b as a,e as f,_ as K,al as k,a5 as q}from"./index-99d0a915.js";const I=V({name:"UserDrawer"}),F=V({...I,setup(E,{expose:U}){const c=N({parentName:[{required:!0,message:"请选择站点归属",trigger:"blur"}],siteName:[{required:!0,message:"请输入站点名称",trigger:"blur"}],siteKey:[{required:!0,message:"请输入站点KEY",trigger:"blur"}],siteId:[{required:!0,message:"请输入站点标识",trigger:"blur"}],siteSign:[{required:!0,message:"请输入站点标识",trigger:"blur"}]}),n=m(!1),e=m({isView:!1,title:"",row:{}}),b=s=>{e.value=s,n.value=!0};function i(s){return s.replace(/\s+/g,"")}const p=m(),_=()=>{p.value.validate(async s=>{if(s)try{e.value.row.siteId=Number(e.value.row.siteId),e.value.row.cfPlayUrl=i(e.value.row.cfPlayUrl),e.value.row.cdnPlayUrl=i(e.value.row.cdnPlayUrl),e.value.row.downloadUrl=i(e.value.row.downloadUrl),e.value.row.directPlayUrl=i(e.value.row.directPlayUrl),await e.value.api(e.value.row),q.success({message:`${e.value.title}站点配置成功！`}),e.value.getTableList(),n.value=!1}catch{}})};return U({acceptParams:b}),(s,l)=>{const v=d("el-option"),y=d("el-select"),t=d("el-form-item"),u=d("el-input"),g=d("el-form"),w=d("el-button"),P=d("el-drawer");return C(),x(P,{modelValue:n.value,"onUpdate:modelValue":l[10]||(l[10]=o=>n.value=o),"destroy-on-close":!0,size:"450px",title:`${e.value.title}站点配置`},{footer:r(()=>[a(w,{onClick:l[9]||(l[9]=o=>n.value=!1)},{default:r(()=>[f(" 取消 ")]),_:1}),K(a(w,{type:"primary",onClick:_},{default:r(()=>[f(" 确定 ")]),_:1},512),[[k,!e.value.isView]])]),default:r(()=>[a(g,{ref_key:"ruleFormRef",ref:p,"label-width":"150px","label-suffix":" :",rules:c,disabled:e.value.isView,model:e.value.row,"hide-required-asterisk":e.value.isView},{default:r(()=>[a(t,{label:"站点归属",prop:"parentName"},{default:r(()=>[a(y,{modelValue:e.value.row.parentName,"onUpdate:modelValue":l[0]||(l[0]=o=>e.value.row.parentName=o),placeholder:"请选择站点归属"},{default:r(()=>[a(v,{label:"桃红",value:"桃红"}),a(v,{label:"集团",value:"集团"})]),_:1},8,["modelValue"])]),_:1}),a(t,{label:"站点名称",prop:"siteName"},{default:r(()=>[a(u,{modelValue:e.value.row.siteName,"onUpdate:modelValue":l[1]||(l[1]=o=>e.value.row.siteName=o),placeholder:"请输入站点名称"},null,8,["modelValue"])]),_:1}),a(t,{label:"站点KEY",prop:"siteKey"},{default:r(()=>[a(u,{modelValue:e.value.row.siteKey,"onUpdate:modelValue":l[2]||(l[2]=o=>e.value.row.siteKey=o),placeholder:"请输入站点KEY"},null,8,["modelValue"])]),_:1}),a(t,{label:"站点标识",prop:"siteId"},{default:r(()=>[a(u,{modelValue:e.value.row.siteId,"onUpdate:modelValue":l[3]||(l[3]=o=>e.value.row.siteId=o),placeholder:"请输入站点KEY"},null,8,["modelValue"])]),_:1}),a(t,{label:"直连播放地址",prop:"directPlayUrl"},{default:r(()=>[a(u,{modelValue:e.value.row.directPlayUrl,"onUpdate:modelValue":l[4]||(l[4]=o=>e.value.row.directPlayUrl=o),placeholder:"请输入直连播放地址"},null,8,["modelValue"])]),_:1}),a(t,{label:"CF播放地址",prop:"cfPlayUrl"},{default:r(()=>[a(u,{modelValue:e.value.row.cfPlayUrl,"onUpdate:modelValue":l[5]||(l[5]=o=>e.value.row.cfPlayUrl=o),placeholder:"请输入CF播放地址"},null,8,["modelValue"])]),_:1}),a(t,{label:"CDN播放地址",prop:"cdnPlayUrl"},{default:r(()=>[a(u,{modelValue:e.value.row.cdnPlayUrl,"onUpdate:modelValue":l[6]||(l[6]=o=>e.value.row.cdnPlayUrl=o),placeholder:"请输入CDN播放地址"},null,8,["modelValue"])]),_:1}),a(t,{label:"视频封面",prop:"videoCover"},{default:r(()=>[a(u,{modelValue:e.value.row.videoCover,"onUpdate:modelValue":l[7]||(l[7]=o=>e.value.row.videoCover=o),placeholder:"请输入视频封面"},null,8,["modelValue"])]),_:1}),a(t,{label:"下载地址",prop:"downloadUrl"},{default:r(()=>[a(u,{modelValue:e.value.row.downloadUrl,"onUpdate:modelValue":l[8]||(l[8]=o=>e.value.row.downloadUrl=o),placeholder:"请输入下载地址"},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","disabled","model","hide-required-asterisk"])]),_:1},8,["modelValue","title"])}}});export{F as _};
