import{A as s,X as d,d as w,B as m,r as h,o as g,e as y,f as i,w as r,g as p,j as S,h as f,l as k,m as v}from"./index-7dc4f2d9.js";import{_ as A}from"./index.vue_vue_type_script_setup_true_name_ProTable_lang-36752a68.js";import{_ as $}from"./SiteConfigDrawer.vue_vue_type_script_setup_true_name_UserDrawer_lang-897da32f.js";import{u as T}from"./useHandleData-9f2382d5.js";import"./_plugin-vue_export-helper-c27b6911.js";const D=t=>s.post(`${d}/siteConfigList`,t),N=t=>s.post(`${d}/addSiteConfig`,t),P=t=>s.post(`${d}/deleteSiteConfig`,t),U=t=>s.post(`${d}/setSiteConfig`,t),x={class:"table-box"},L=w({name:"useProTable"}),q=w({...L,setup(t){const c=m(),b=[{width:100,prop:"parentName",label:"站点"},{width:100,prop:"siteName",label:"站点名称"},{width:100,prop:"siteKey",label:"站点KEY"},{width:100,prop:"siteId",label:"站点标识"},{width:180,prop:"directPlayUrl",label:"直连播放域名"},{width:180,prop:"cfPlayUrl",label:"阿里云播放域名"},{width:180,prop:"cdnPlayUrl",label:"亚马逊播放域名"},{width:180,prop:"hcPlayUrl",label:"华为云播放域名"},{width:180,prop:"videoCover",label:"视频封面"},{width:180,prop:"downloadUrl",label:"下载域名"},{width:180,prop:"UpdatedAt",label:"更新时间",render(e){return new Date(e.row.UpdatedAt).toLocaleString()}},{width:180,prop:"CreatedAt",label:"创建时间",render(e){return new Date(e.row.CreatedAt).toLocaleString()}},{prop:"operation",label:"操作",fixed:"right",width:180}],_=m(null),u=(e,l={})=>{var o,n;const a={title:e,isView:e==="查看",row:{...l},api:e==="新增"?N:e==="编辑"?U:void 0,getTableList:(o=c.value)==null?void 0:o.getTableList};(n=_.value)==null||n.acceptParams(a)},C=async e=>{await T(P,{id:e.ID},`删除【${e.siteName}】`),c.value.getTableList()};return(e,l)=>{const a=h("el-button");return g(),y("div",x,[i(A,{ref_key:"proTable",ref:c,title:"站点配置列表",indent:30,columns:b,"request-api":p(D)},{tableHeader:r(()=>[i(a,{type:"primary",icon:p(S),onClick:l[0]||(l[0]=o=>u("新增"))},{default:r(()=>[f("新增站点配置")]),_:1},8,["icon"])]),operation:r(({row:o})=>[i(a,{type:"primary",link:"",icon:p(k),onClick:n=>u("编辑",o)},{default:r(()=>[f(" 编辑 ")]),_:2},1032,["icon","onClick"]),i(a,{type:"primary",link:"",icon:p(v),onClick:n=>C(o)},{default:r(()=>[f(" 删除 ")]),_:2},1032,["icon","onClick"])]),_:1},8,["request-api"]),i($,{ref_key:"SiteConfigDrawerRef",ref:_},null,512)])}}});export{q as default};
