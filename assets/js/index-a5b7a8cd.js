import{A as s,X as d,d as b,B as w,r as h,o as g,e as y,f as i,w as l,g as p,j as S,h as f,l as k,m as v}from"./index-c43d1155.js";import{_ as N}from"./index.vue_vue_type_script_setup_true_name_ProTable_lang-c524650c.js";import{_ as A}from"./SiteConfigDrawer.vue_vue_type_script_setup_true_name_UserDrawer_lang-5e4e441c.js";import{u as D}from"./useHandleData-701da553.js";import"./_plugin-vue_export-helper-c27b6911.js";const $=t=>s.post(`${d}/siteConfigList`,t),T=t=>s.post(`${d}/addSiteConfig`,t),P=t=>s.post(`${d}/deleteSiteConfig`,t),U=t=>s.post(`${d}/setSiteConfig`,t),x={class:"table-box"},L=b({name:"useProTable"}),q=b({...L,setup(t){const c=w(),m=[{width:100,prop:"parentName",label:"站点"},{width:100,prop:"siteName",label:"站点名称"},{width:100,prop:"siteKey",label:"站点KEY"},{width:100,prop:"siteId",label:"站点标识"},{width:180,prop:"directPlayUrl",label:"直连播放域名"},{width:180,prop:"cfPlayUrl",label:"阿里云播放域名"},{width:180,prop:"cdnPlayUrl",label:"NBCDN播放域名"},{width:180,prop:"hcPlayUrl",label:"华为云播放域名"},{width:180,prop:"nbcdncfPlayUrl",label:"NBCDNCF播放域名"},{width:180,prop:"videoCover",label:"视频封面"},{width:180,prop:"downloadUrl",label:"下载域名"},{width:180,prop:"UpdatedAt",label:"更新时间",render(e){return new Date(e.row.UpdatedAt).toLocaleString()}},{width:180,prop:"CreatedAt",label:"创建时间",render(e){return new Date(e.row.CreatedAt).toLocaleString()}},{prop:"operation",label:"操作",fixed:"right",width:180}],_=w(null),u=(e,r={})=>{var o,n;const a={title:e,isView:e==="查看",row:{...r},api:e==="新增"?T:e==="编辑"?U:void 0,getTableList:(o=c.value)==null?void 0:o.getTableList};(n=_.value)==null||n.acceptParams(a)},C=async e=>{await D(P,{id:e.ID},`删除【${e.siteName}】`),c.value.getTableList()};return(e,r)=>{const a=h("el-button");return g(),y("div",x,[i(N,{ref_key:"proTable",ref:c,title:"站点配置列表",indent:30,columns:m,"request-api":p($)},{tableHeader:l(()=>[i(a,{type:"primary",icon:p(S),onClick:r[0]||(r[0]=o=>u("新增"))},{default:l(()=>[f("新增站点配置")]),_:1},8,["icon"])]),operation:l(({row:o})=>[i(a,{type:"primary",link:"",icon:p(k),onClick:n=>u("编辑",o)},{default:l(()=>[f(" 编辑 ")]),_:2},1032,["icon","onClick"]),i(a,{type:"primary",link:"",icon:p(v),onClick:n=>C(o)},{default:l(()=>[f(" 删除 ")]),_:2},1032,["icon","onClick"])]),_:1},8,["request-api"]),i(A,{ref_key:"SiteConfigDrawerRef",ref:_},null,512)])}}});export{q as default};
